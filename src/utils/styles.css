/* =============================================================================
   DMRB Dashboard — Pure Dark Theme (No White)
   ============================================================================= */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

:root {
  /* Dark grayscale system — no white anywhere */
  --gray-50: #0a0a0a;   /* Page background */
  --gray-100: #121212;  /* Phase containers */
  --gray-200: #1a1a1a;  /* Building cards */
  --gray-300: #242424;  /* Unit cards */
  --gray-400: #333333;  /* Section borders */
  --gray-500: #444444;  /* Lines / inner dividers */
  --gray-600: #666666;  /* Muted text */
  --gray-700: #888888;  /* Secondary text */
  --gray-800: #aaaaaa;  /* Soft text */
  --gray-900: #e0e0e0;  /* Primary text (lightest, but not white) */

  /* Spacing & Radius */
  --spacing-xs: 0.125rem;
  --spacing-sm: 0.25rem;
  --spacing-md: 0.5rem;
  --spacing-lg: 0.75rem;
  --spacing-xl: 1rem;
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;

  /* Shadows — darker for depth */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.5);
  --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.5);
  --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.6);
  --shadow-xl: 0 8px 16px rgba(0, 0, 0, 0.7);
}

/* =============================================================================
   GLOBAL
   ============================================================================= */
html, body, [class*="css"] {
  font-family: 'Inter', sans-serif !important;
  font-size: 15px;
  background-color: var(--gray-50) !important;
  color: var(--gray-900) !important;
}

.stApp {
  background: var(--gray-50) !important;
  color: var(--gray-900) !important;
}

main .block-container {
  background: var(--gray-50) !important;
}

/* Sidebar dark theme */
section[data-testid="stSidebar"] {
  background-color: var(--gray-100) !important;
  visibility: visible !important;
  display: block !important;
  min-width: 15rem !important;
}

section[data-testid="stSidebar"] > div {
  background-color: var(--gray-100) !important;
}

/* Sidebar content */
section[data-testid="stSidebar"] [data-testid="stMarkdownContainer"] {
  color: var(--gray-900) !important;
}

/* Hide footer, keep header visible */
footer { visibility: hidden; }

button[kind="header"] {
  visibility: visible !important;
  display: block !important;
}

/* Dark buttons */
button[kind="primary"], button[kind="secondary"] {
  background-color: var(--gray-300) !important;
  color: var(--gray-900) !important;
  border: 1px solid var(--gray-500) !important;
}

button[kind="primary"]:hover, button[kind="secondary"]:hover {
  background-color: var(--gray-400) !important;
  border-color: var(--gray-600) !important;
}

/* =============================================================================
   EXPANDERS - Progressive grayscale hierarchy
   ============================================================================= */
div[data-testid="stExpander"] > details {
  background: var(--gray-200) !important;
  border: 1px solid var(--gray-400) !important;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-sm);
  color: var(--gray-900) !important;
  margin-bottom: var(--spacing-sm);
  transition: all 0.25s ease;
}

div[data-testid="stExpander"]:hover > details {
  border-color: var(--gray-500) !important;
  box-shadow: var(--shadow-md);
}

div[data-testid="stExpander"][open] > details {
  background: var(--gray-300) !important;
  box-shadow: var(--shadow-lg);
  border-color: var(--gray-500) !important;
}

div[data-testid="stExpander"] summary {
  background: var(--gray-200) !important;
  color: var(--gray-900) !important;
  font-weight: 600;
  padding: 0.5rem 0.75rem;
  cursor: pointer;
}

div[data-testid="stExpander"] summary:hover {
  background: var(--gray-300) !important;
}

div[data-testid="stExpander"] [data-testid="stExpanderDetails"] {
  background: transparent !important;
  padding: var(--spacing-sm);
}

/* =============================================================================
   TABS - Dark styling
   ============================================================================= */
button[data-baseweb="tab"] {
  background-color: var(--gray-200) !important;
  color: var(--gray-800) !important;
  border-bottom: 2px solid var(--gray-400) !important;
}

button[data-baseweb="tab"][aria-selected="true"] {
  background-color: var(--gray-300) !important;
  color: var(--gray-900) !important;
  border-bottom: 2px solid var(--gray-900) !important;
}

button[data-baseweb="tab"]:hover {
  background-color: var(--gray-300) !important;
  color: var(--gray-900) !important;
}

/* =============================================================================
   PHASE, BUILDING, UNIT CARDS
   ============================================================================= */
.phase-card {
  background: var(--gray-100) !important;
  border-left: 2px solid var(--gray-400);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.building-card {
  background: var(--gray-200) !important;
  border-left: 2px solid var(--gray-500);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm) var(--spacing-md);
  box-shadow: var(--shadow-sm);
  margin-bottom: var(--spacing-sm);
  transition: all 0.25s ease;
}

.building-card:hover {
  transform: translateY(-2px);
  background: var(--gray-300) !important;
  box-shadow: var(--shadow-md);
}

.unit-card {
  background: var(--gray-300) !important;
  border-left: 1px solid var(--gray-500);
  border-radius: var(--radius-md);
  padding: var(--spacing-xs) var(--spacing-sm);
  box-shadow: var(--shadow-sm);
  transition: all 0.2s ease;
}

.unit-card:hover {
  background: var(--gray-400) !important;
  transform: translateY(-1px);
}

/* =============================================================================
   TEXT STYLES
   ============================================================================= */
.text-muted { color: var(--gray-700) !important; }
.text-secondary { color: var(--gray-800) !important; }
.text-primary { color: var(--gray-900) !important; }

strong { color: var(--gray-900) !important; }
small { color: var(--gray-700) !important; }

h1, h2, h3, h4, h5, h6 {
  color: var(--gray-900) !important;
}

p, div, span {
  color: var(--gray-900) !important;
}

/* Markdown text */
[data-testid="stMarkdownContainer"] {
  color: var(--gray-900) !important;
}

/* Metric labels and values */
[data-testid="stMetricLabel"] {
  color: var(--gray-800) !important;
}

[data-testid="stMetricValue"] {
  color: var(--gray-900) !important;
}

/* Caption text */
.stCaption, [data-testid="stCaptionContainer"] {
  color: var(--gray-700) !important;
}

/* =============================================================================
   DIVIDERS & UTILITIES
   ============================================================================= */
.divider {
  border-bottom: 1px solid var(--gray-500);
  margin: var(--spacing-xs) 0;
  opacity: 0.6;
}

hr {
  border-color: var(--gray-500) !important;
}

/* =============================================================================
   PAGE-SPECIFIC ADJUSTMENTS
   ============================================================================= */
.main-title {
  font-size: 2.25rem !important;
  font-weight: 700 !important;
  letter-spacing: 0.5px !important;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.8) !important;
  margin-top: 0 !important;
  margin-bottom: var(--spacing-sm) !important;
  color: var(--gray-900) !important;
}

.caption-centered {
  font-size: 0.9rem !important;
  margin-bottom: var(--spacing-md) !important;
  color: var(--gray-800) !important;
}

main .block-container {
  padding-top: var(--spacing-md) !important;
  padding-bottom: var(--spacing-lg) !important;
}

/* =============================================================================
   SECTION CONTAINERS & KPI CARDS
   ============================================================================= */
.section-box {
  background: var(--gray-100) !important;
  border: 1px solid var(--gray-500);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-md);
  box-shadow: var(--shadow-sm);
}

.section-box h3 {
  color: var(--gray-900) !important;
  margin: 0 0 var(--spacing-sm) 0;
  font-size: 1.125rem;
  font-weight: 600;
}

.kpi-card {
  background: var(--gray-200) !important;
  border: 1px solid var(--gray-400);
  border-radius: var(--radius-md);
  padding: var(--spacing-sm) var(--spacing-md);
  text-align: center;
  box-shadow: var(--shadow-sm);
}

.kpi-label {
  color: var(--gray-700) !important;
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
}

.kpi-value {
  color: var(--gray-900) !important;
  font-size: 1.75rem;
  font-weight: 800;
  margin: 0.35rem 0;
}

.kpi-subtitle {
  color: var(--gray-700) !important;
  font-size: 0.8rem;
}

.kpi-progress {
  background: var(--gray-400) !important;
  height: 6px;
  border-radius: 3px;
  overflow: hidden;
  margin-top: 0.4rem;
}

.kpi-progress-fill {
  background: var(--gray-900) !important;
  height: 100%;
}

/* =============================================================================
   UTILITIES: Separators, Grid, Meta text, Tables
   ============================================================================= */
.hairline {
  border-bottom: 1px solid var(--gray-500);
  opacity: 0.35;
  margin: var(--spacing-sm) 0;
}

.row-grid {
  display: grid;
  gap: var(--spacing-sm);
  align-items: center;
}

.meta-label {
  color: var(--gray-700) !important;
  font-size: 0.68rem;
  font-weight: 600;
  text-transform: uppercase;
}

.meta-value {
  color: var(--gray-900) !important;
  font-size: 1rem;
  font-weight: 700;
}

/* Dark tables and dataframes */
div[data-testid="stDataFrame"] {
  background: var(--gray-200) !important;
}

div[data-testid="stDataFrame"] table {
  background: var(--gray-200) !important;
  color: var(--gray-900) !important;
}

div[data-testid="stDataFrame"] thead tr th {
  background: var(--gray-300) !important;
  color: var(--gray-900) !important;
  border-bottom: 1px solid var(--gray-500) !important;
}

div[data-testid="stDataFrame"] tbody tr td {
  border-top: 1px solid var(--gray-500) !important;
  color: var(--gray-900) !important;
}

div[data-testid="stDataFrame"] tbody tr {
  background: var(--gray-200) !important;
}

div[data-testid="stDataFrame"] tbody tr:hover {
  background: var(--gray-300) !important;
}

/* Info/warning/error boxes */
div[data-testid="stAlert"] {
  background: var(--gray-200) !important;
  color: var(--gray-900) !important;
  border-left: 4px solid var(--gray-600) !important;
}

/* Input fields */
input, textarea, select {
  background-color: var(--gray-200) !important;
  color: var(--gray-900) !important;
  border: 1px solid var(--gray-500) !important;
}

input:focus, textarea:focus, select:focus {
  border-color: var(--gray-700) !important;
  background-color: var(--gray-300) !important;
}

.fade-in {
  animation: fadeIn 0.4s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Ultra compact unit rows - almost touching */
.stMarkdown small {
  line-height: 1.1 !important;
  margin: 0 !important;
  padding: 0 !important;
  display: block;
}

/* Minimal column padding for unit rows */
[data-testid="column"] {
  padding-top: 0.1rem !important;
  padding-bottom: 0.1rem !important;
}

/* Compact paragraph spacing */
.stMarkdown p {
  margin-bottom: 0.1rem !important;
  margin-top: 0 !important;
}

/* Ultra-tight dividers - almost touching text */
hr {
  margin-top: 0.1rem !important;
  margin-bottom: 0.1rem !important;
  border-color: var(--gray-500) !important;
  opacity: 0.3 !important;
}

/* Remove all extra spacing */
div[data-testid="column"] > div {
  padding: 0 !important;
  margin: 0 !important;
}

/* Tight expander content */
div[data-testid="stExpander"] [data-testid="stExpanderDetails"] {
  padding: 0.25rem !important;
}
